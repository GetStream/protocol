---
id: authentication
sidebar_position: 2
slug: /authentication
title: Users & Tokens
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Creating users

<Tabs groupId="examples">
<TabItem value="js" label="JavaScript">

```js
const newUser: UserObjectRequest = {
  id: 'userid',
  role: "user",
  custom: {
    color: 'red'
  },
  name: 'This is a test user',
  image: 'link/to/profile/image'
};
await client.upsertUsers({
  users: {
    [newUser.id]: newUser,
  },
});
```

</TabItem>
</Tabs>

## Updating users

<Tabs groupId="examples">
<TabItem value="js" label="JavaScript">

```js
const user: UserObjectRequest = {
  id: 'userid',
  role: "user",
  custom: {
    color: 'red'
  },
  name: 'This is a test user',
  image: 'link/to/profile/image'
};
client.upsertUsers({
  users: {
    [user.id]: user,
  },
});

// or
client.updateUsersPartial({users: [
  {
    id: user.id,
	set: {
	  color: 'blue'
	},
	unset: ['name'],
  }
]});
```

</TabItem>
</Tabs>

## User tokens

<Tabs groupId="examples">
<TabItem value="js" label="JavaScript">

```js
const userId = 'john';
// exp and iat are optional
// the token will be valid for 1hour
const exp = Math.round(new Date().getTime() / 1000) + 60 * 60;
const iat = Math.round(new Date().getTime() / 1000);
client.createToken(userId, exp, iat);
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
    print("Hello, world!")
```

</TabItem>
<TabItem value="go" label="Golang">

```go
func main() {
	apiKey := os.Getenv("API_KEY")
	apiSecret := os.Getenv("API_SECRET")
	userID := os.Getenv("USER_ID")

	if apiKey == "" || apiSecret == "" || userID == "" {
		panic("API_KEY, API_SECRET and USER_ID env variables must be set")
	}

	tokenProvider := videosdk.UserToken(apiSecret, userID, 24*time.Hour)
	sdk := videosdk.New(apiKey, tokenProvider)

	token, err := tokenProvider(sdk.APIKey())
	if err != nil {
		panic(err)
	}

	fmt.Println("token ->", token)
}
```

</TabItem>
</Tabs>

## Call tokens

<Tabs groupId="examples">
<TabItem value="js" label="JavaScript">

```js
const userId = 'john';
// exp and iat are optional
// the token will be valid for 1hour
const exp = Math.round(new Date().getTime() / 1000) + 60 * 60;
const iat = Math.round(new Date().getTime() / 1000);

const call_cids = ['default:call1', 'livestream:call2'];

client.createToken(userId, exp, iat, call_cids);
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
    print("Hello, world!")
```

</TabItem>
<TabItem value="go" label="Golang">

```go
func main() {
	apiKey := os.Getenv("API_KEY")
	apiSecret := os.Getenv("API_SECRET")
	userID := os.Getenv("USER_ID")

	if apiKey == "" || apiSecret == "" || userID == "" {
		panic("API_KEY, API_SECRET and USER_ID env variables must be set")
	}

	tokenProvider := videosdk.UserToken(apiSecret, userID, 24*time.Hour)
	sdk := videosdk.New(apiKey, tokenProvider)

	token, err := tokenProvider(sdk.APIKey())
	if err != nil {
		panic(err)
	}

	fmt.Println("token ->", token)
}
```

</TabItem>
</Tabs>

## Token expiration and token providers

TODO: explain that tokens should have an expiration
TODO: mention that in a production environment you have an endpoint to send fresh tokens to users
